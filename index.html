<!DOCTYPE html>
<html lang="ht">
<head>
    <link rel="icon" type="image/png" href="logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LAVRI ZETWAL | Pi pw√≤p, pi santi bon</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="bubble-container"></div>
    <div id="star-container" class="star-field"></div>

    <nav class="nav">
        <div class="container nav-content">
            <a href="https://wa.me/79961103506" class="wa-icon-btn">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WA" class="wa-img">
            </a>
            
            <ul class="nav-links">
                <li><a href="index.html" class="active">Ak√®y</a></li>
                <li><a href="services.html">S√®vis</a></li>
                <li><a href="tarifs.html">Tarif</a></li>
            </ul>
            <div class="logo-container">
    <img src="logo.png" alt="Zetwal" class="nav-logo-icon">
    <div class="logo-text">LAVRI <span>ZETWAL</span></div>
            </div>
    </nav>

    <header class="hero">
        <div class="container">
            <div class="hero-content">
                <span class="location-badge-gold">Gonayiv ‚Ä¢ Enpas 3e Riy√®l Yamoul #5</span>
                <h1 class="main-title">Pi pw√≤p, <br><span class="gold-shimmer-extreme">pi santi bon.</span></h1>
                <p class="gold-text-sub-glow">Lave pi rapid san traka</p>
                <div class="hero-cta">
                    <a href="https://wa.me/79961103506" class="btn-main-gold">k√≤mande lavaj ou kounye a</a>
                </div>
            </div>
        </div>
    </header>

    <section class="gallery-prestige">
        <div class="container">
            <div class="image-showcase">
                <div class="img-wrapper">
                    <img src="machine.jpg" alt="Machin Lavri Zetwal">
                    <div class="img-overlay">10 Machin 22Kg Disponib</div>
                </div>
            </div>
        </div>
    </section>
<canvas id="galaxy-bg" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: #050505;"></canvas>
<div id="ai-core" style="position: fixed; bottom: 20px; right: 20px; width: 40px; height: 40px; background: radial-gradient(circle, #ffd700, #fff); border-radius: 50%; box-shadow: 0 0 20px #ffd700; opacity: 0.6; z-index: 1000; transition: 0.5s;"></div>

<section id="main-game-area" style="padding: 20px; text-align: center; color: white; position: relative; z-index: 10;">
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">

        <div class="tarif-item interactive-card" style="flex: 1; min-width: 300px; max-width: 350px; padding: 25px; border-radius: 20px; background: rgba(0,0,0,0.9); border: 2px solid #ffd700;">
            <h3 style="color: #ffd700;">Mwen menm</h3>
            <div id="user-status">Chaje...</div>
            <div id="player-stats" style="display:none; margin-top:15px; border-top: 1px solid #444; padding-top:10px;">
                <p style="font-size: 1.5rem; font-weight: bold;">üí∞ <span id="balance">0</span></p>
                <p style="font-size: 0.8rem; color: #aaa;">Kado nan: <span id="reward-timer" style="color:#ffd700">--:--:--</span></p>
                <button id="btn-logout" class="social-btn" style="background: #333; font-size: 0.7rem; margin-top:10px;">Dekonekte</button>
            </div>
            <div id="login-methods" style="margin-top:15px;">
                <button id="btn-google" class="social-btn" style="background: #db4437;">Google</button>
            </div>
        </div>

        <div class="tarif-item interactive-card" id="game-section" style="flex: 2; min-width: 320px; max-width: 550px; padding: 25px; border-radius: 20px; background: rgba(0,0,0,0.95); border: 2px solid #333; opacity: 0.5; pointer-events: none;">
            <h2 style="color: #ffd700;">üß∫ Lavri Challenge</h2>
            
            <div style="font-size: 0.75rem; background: rgba(255,215,0,0.1); padding: 10px; border-radius: 10px; margin-bottom: 15px; border: 1px dashed #ffd700; text-align: left;">
                <strong>R√àGLES :</strong><br>
                üö´ Pa melanje ‚ö™ <strong>Blan</strong> ak üî¥ <strong>Koul√®</strong> oswa ‚ö´ <strong>Nwa</strong>.<br>
                ‚öñÔ∏è Pwa ideyal : <strong>20.5kg rive 22kg</strong>.<br>
                ‚ö†Ô∏è 3 er√® = P√®di. Chak jw√®t koute 3 pwen.
            </div>

            <div id="game-ui" style="display:none;">
                <div style="display: flex; justify-content: space-around; background: #222; padding: 10px; border-radius: 10px; border: 1px solid #444;">
                    <div>‚è±Ô∏è <span id="time" style="font-weight:bold;">60</span>s</div>
                    <div>‚öñÔ∏è <span id="weight" style="color:#00ff00; font-weight:bold;">0</span> / 22kg</div>
                </div>
                
                <div id="clothes-conveyor" style="display: flex; justify-content: center; gap: 15px; margin: 20px 0; min-height: 100px;"></div>

                <button id="finishBtn" class="social-btn" style="background: linear-gradient(45deg, #ffd700, #ffa500); color: black;">T√àMINE LESSIVE (-3 pwen)</button>
            </div>
            <div id="lock-msg">üîí Konekte w pou jwe</div>
        </div>
    </div>
</section>

<div id="report-modal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,0,0,0.95); padding:30px; border-radius:20px; border:2px solid #ffd700; z-index:2000; width:90%; max-width:400px; text-align:center;">
    <h3 id="report-title" style="color:#ffd700;">R√©silta</h3>
    <div id="report-details" style="margin:20px 0; max-height:200px; overflow-y:auto; text-align:left; font-size:0.9rem;"></div>
    <button onclick="document.getElementById('report-modal').style.display='none'" class="social-btn" style="background:#ffd700; color:black;">OK</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

const firebaseConfig = { apiKey: "AIzaSyAjCnmtvu0tqlsNDEtKraKBG79y12qYeCQ", authDomain: "lavrizetwal.firebaseapp.com", projectId: "lavrizetwal", storageBucket: "lavrizetwal.firebasestorage.app", messagingSenderId: "291921316186", appId: "1:291921316186:web:f55e8b34526960df394b63" };
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let player = { points: 100, lastReward: Date.now(), version: "2.0" }; // Version pour reset points
let gameActive = false, time = 60, weight = 0, errors = 0, usedColors = new Set(), timerInterval;
let sessionChoices = [];

const clothesLibrary = [
    { e: "üëï", w: 2, c: "white", n: "T-shirt Blan" }, { e: "üß¶", w: 1, c: "black", n: "Chos√®t Nwa" },
    { e: "üëñ", w: 3, c: "color", n: "Jean Koul√®" }, { e: "üëö", w: 2.5, c: "color", n: "Chemiz Koul√®" },
    { e: "ü©≥", w: 1.5, c: "black", n: "Kalson Nwa" }, { e: "üëî", w: 2, c: "white", n: "Chemiz Blan" },
    { e: "üëó", w: 4, c: "color", n: "W√≤b Koul√®" }
];

// --- GALAXIE ---
const canvas = document.getElementById('galaxy-bg');
const ctx = canvas.getContext('2d');
let stars = [];
function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.onresize = resize; resize();
for(let i=0; i<100; i++) stars.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, size:Math.random()*2, speed:Math.random()*0.2+0.1, color:Math.random()>0.5?'255,215,0':'255,255,255', op:Math.random(), blk:Math.random()*0.02});
function anim() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    stars.forEach(s=>{ s.op+=s.blk; if(s.op>1||s.op<0.2) s.blk*=-1; ctx.fillStyle=`rgba(${s.color},${Math.abs(s.op)})`; ctx.beginPath(); ctx.arc(s.x,s.y,s.size,0,Math.PI*2); ctx.fill(); s.y+=s.speed; if(s.y>canvas.height) s.y=-10; });
    document.getElementById('ai-core').style.transform=`scale(${1+Math.sin(Date.now()/500)*0.1})`;
    requestAnimationFrame(anim);
}
anim();

// --- LOGIQUE ---
function updateUI() {
    document.getElementById("balance").textContent = player.points;
    document.getElementById("weight").textContent = weight.toFixed(1);
    document.getElementById("time").textContent = time;
}

function generateCloth() {
    const data = clothesLibrary[Math.floor(Math.random() * clothesLibrary.length)];
    const btn = document.createElement("button");
    btn.className = "cloth-btn";
    btn.innerHTML = `${data.e}<br><small>${data.w}kg</small>`;
    btn.onclick = () => {
        if(!gameActive) startGame();
        weight += data.w;
        let isError = false;
        if ((data.c === "white" && (usedColors.has("color") || usedColors.has("black"))) || (usedColors.has("white") && data.c !== "white")) {
            errors++;
            isError = true;
        }
        usedColors.add(data.c);
        sessionChoices.push({ ...data, error: isError });
        btn.style.opacity = "0"; setTimeout(() => { btn.remove(); generateCloth(); }, 150);
        updateUI();
    };
    document.getElementById("clothes-conveyor").appendChild(btn);
}

function startGame() {
    gameActive = true;
    timerInterval = setInterval(() => {
        time--; if(time <= 0) showReport("Tan fini!");
        updateUI();
    }, 1000);
}

function showReport(title) {
    clearInterval(timerInterval);
    const modal = document.getElementById("report-modal");
    const details = document.getElementById("report-details");
    document.getElementById("report-title").innerText = title;
    
    let html = `<p>‚öñÔ∏è Pwa total: <strong>${weight.toFixed(1)}kg</strong></p>`;
    html += `<p>‚ùå Er√® triyaj: <strong>${errors}</strong></p><hr>`;
    sessionChoices.forEach(c => {
        html += `<div style="color:${c.error?'#ff4444':'#00ff00'}">${c.error?'‚ùå':'‚úÖ'} ${c.e} ${c.n} (${c.w}kg)</div>`;
    });
    
    details.innerHTML = html;
    modal.style.display = "block";
    resetGame();
}

function resetGame() {
    gameActive = false; time = 60; weight = 0; errors = 0; usedColors.clear(); sessionChoices = [];
    document.getElementById("clothes-conveyor").innerHTML = "";
    for(let i=0; i<3; i++) generateCloth();
    updateUI();
}

document.getElementById("finishBtn").onclick = () => {
    if(player.points < 3) return alert("Ou bezwen 3 pwen!");
    player.points -= 3;
    let win = 0;
    if(weight >= 20.5 && weight <= 22 && errors < 3) {
        if(errors === 0) win = 10; else if(errors === 1) win = 5; else win = 3;
        player.points += win;
        showReport(`üéâ SIKSE! Ou genyen ${win} pwen`);
    } else {
        showReport(`‚ùå ECH√àK! Machin nan pa bon`);
    }
    localStorage.setItem(`lavri_${auth.currentUser.uid}`, JSON.stringify(player));
    updateUI();
};

onAuthStateChanged(auth, (user) => {
    if (user) {
        let saved = localStorage.getItem(`lavri_${user.uid}`);
        let parsed = saved ? JSON.parse(saved) : null;
        // Reset √† 100 si nouvelle version ou premier utilisateur
        if(!parsed || parsed.version !== "2.0") {
            player = { points: 100, lastReward: Date.now(), version: "2.0" };
        } else {
            player = parsed;
        }
        localStorage.setItem(`lavri_${user.uid}`, JSON.stringify(player));
        
        document.getElementById("user-status").innerHTML = `Byenvini <b style="color:#ffd700">${user.displayName}</b>`;
        document.getElementById("login-methods").style.display = "none";
        document.getElementById("player-stats").style.display = "block";
        document.getElementById("game-section").style.opacity = "1";
        document.getElementById("game-section").style.pointerEvents = "auto";
        document.getElementById("game-ui").style.display = "block";
        document.getElementById("lock-msg").style.display = "none";
        resetGame();
    }
});

document.getElementById('btn-google').onclick = () => signInWithPopup(auth, new GoogleAuthProvider());
document.getElementById('btn-logout').onclick = () => signOut(auth).then(()=>location.reload());
</script>

<style>
.social-btn { width: 100%; margin: 5px 0; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; color: white; }
.cloth-btn { background: #333; border: 1px solid #ffd700; color: white; padding: 10px; border-radius: 12px; cursor: pointer; width: 75px; transition: 0.2s; }
.interactive-card { transition: 0.4s; }
</style>
</body>
</html>

</body>
</html>

























