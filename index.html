<!DOCTYPE html>
<html lang="ht">
<head>
    <link rel="icon" type="image/png" href="logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LAVRI ZETWAL | Pi pw√≤p, pi santi bon</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="bubble-container"></div>
    <div id="star-container" class="star-field"></div>

    <nav class="nav">
        <div class="container nav-content">
            <a href="https://wa.me/79961103506" class="wa-icon-btn">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WA" class="wa-img">
            </a>
            
            <ul class="nav-links">
                <li><a href="index.html" class="active">Ak√®y</a></li>
                <li><a href="services.html">S√®vis</a></li>
                <li><a href="tarifs.html">Tarif</a></li>
            </ul>
            <div class="logo-container">
    <img src="logo.png" alt="Zetwal" class="nav-logo-icon">
    <div class="logo-text">LAVRI <span>ZETWAL</span></div>
            </div>
    </nav>

    <header class="hero">
        <div class="container">
            <div class="hero-content">
                <span class="location-badge-gold">Gonayiv ‚Ä¢ Enpas 3e Riy√®l Yamoul #5</span>
                <h1 class="main-title">Pi pw√≤p, <br><span class="gold-shimmer-extreme">pi santi bon.</span></h1>
                <p class="gold-text-sub-glow">Lave pi rapid san traka</p>
                <div class="hero-cta">
                    <a href="https://wa.me/79961103506" class="btn-main-gold">k√≤mande lavaj ou kounye a</a>
                </div>
            </div>
        </div>
    </header>

    <section class="gallery-prestige">
        <div class="container">
            <div class="image-showcase">
                <div class="img-wrapper">
                    <img src="machine.jpg" alt="Machin Lavri Zetwal">
                    <div class="img-overlay">10 Machin 22Kg Disponib</div>
                </div>
            </div>
        </div>
    </section>
<canvas id="galaxy-bg" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: #050505;"></canvas>
<div id="ai-core" style="position: fixed; bottom: 20px; right: 20px; width: 40px; height: 40px; background: radial-gradient(circle, #ffd700, #fff); border-radius: 50%; box-shadow: 0 0 20px #ffd700; opacity: 0.6; z-index: 1000; transition: 0.5s;"></div>

<section id="main-game-area" style="padding: 20px; text-align: center; color: white; position: relative; z-index: 10;">
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">

        <div class="tarif-item interactive-card" style="flex: 1; min-width: 300px; max-width: 400px; padding: 25px; border-radius: 20px; background: rgba(0,0,0,0.85); border: 2px solid #ffd700;">
            <h3 id="auth-title" style="color: #ffd700;">Mwen menm</h3>
            <div id="user-status">Konekte pou w k√≤manse</div>
            <div id="login-methods" style="margin-top:15px;">
                <button id="btn-google" class="social-btn" style="background: #db4437;">Google</button>
            </div>
            <div id="player-stats" style="display:none; margin-top:15px; border-top: 1px solid #444; padding-top:10px;">
                <p style="font-size: 1.2rem;">üí∞ <span id="balance">0</span> Pwen</p>
                <p style="font-size: 0.8rem; color: #aaa;">Pwochen kado nan: <br><span id="reward-timer" style="color:#ffd700">--:--:--</span></p>
                <button id="btn-logout" class="social-btn" style="background: #555; font-size: 0.7rem;">Dekonekte</button>
            </div>
        </div>

        <div class="tarif-item interactive-card" id="game-section" style="flex: 2; min-width: 320px; max-width: 600px; padding: 25px; border-radius: 20px; background: rgba(0,0,0,0.85); border: 2px solid #333; opacity: 0.5; pointer-events: none;">
            <h2 style="color: #ffd700;">üß∫ Lavri Challenge</h2>
            <div id="game-ui" style="display:none;">
                <div style="display: flex; justify-content: space-around; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px; margin-bottom: 10px;">
                    <div>‚è±Ô∏è <span id="time">60</span>s</div>
                    <div>‚öñÔ∏è <span id="weight">0</span>kg</div>
                    <div>‚ùå <span id="errors">0</span></div>
                </div>
                <div id="clothes-bin" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 15px 0;"></div>
                <button id="finishBtn" class="social-btn" style="background: linear-gradient(45deg, #ffd700, #ffa500); color: black;">T√àMINE LESSIVE (-3 pwen)</button>
            </div>
            <div id="lock-msg">üîí Konekte w epi genyen omwen 3 pwen pou jwe</div>
        </div>

    </div>
</section>

<footer style="text-align:center; padding: 20px; color: #ffd700;">¬© 2026 LAVRI ZETWAL</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

const firebaseConfig = { apiKey: "AIzaSyAjCnmtvu0tqlsNDEtKraKBG79y12qYeCQ", authDomain: "lavrizetwal.firebaseapp.com", projectId: "lavrizetwal", storageBucket: "lavrizetwal.firebasestorage.app", messagingSenderId: "291921316186", appId: "1:291921316186:web:f55e8b34526960df394b63" };
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const ding = new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3');
const dong = new Audio('https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3');

let player = { points: 0, lastReward: 0 };
let gameActive = false, time = 60, weight = 0, errors = 0, usedColors = new Set(), timerInterval;

const clothesData = [
    { e: "üëï", w: 2, c: "white" }, { e: "üß¶", w: 1, c: "black" },
    { e: "üëñ", w: 3, c: "color" }, { e: "üëö", w: 2.5, c: "color" },
    { e: "ü©≥", w: 1.5, c: "black" }, { e: "üëî", w: 2, c: "white" }
];

// --- FOND GALAXIE & PARTICULES ---
const canvas = document.getElementById('galaxy-bg');
const ctx = canvas.getContext('2d');
let stars = [];
function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.onresize = resize; resize();
for(let i=0; i<100; i++) stars.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, size:Math.random()*2, speed:Math.random()*0.2+0.1, color:Math.random()>0.5?'255,215,0':'255,255,255', op:Math.random(), blk:Math.random()*0.02});
function anim() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    stars.forEach(s=>{ s.op+=s.blk; if(s.op>1||s.op<0.2) s.blk*=-1; ctx.fillStyle=`rgba(${s.color},${Math.abs(s.op)})`; ctx.beginPath(); ctx.arc(s.x,s.y,s.size,0,Math.PI*2); ctx.fill(); s.y+=s.speed; if(s.y>canvas.height) s.y=-10; });
    document.getElementById('ai-core').style.transform=`scale(${1+Math.sin(Date.now()/500)*0.1})`;
    requestAnimationFrame(anim);
}
anim();

// --- GESTION DES POINTS & TIMERS ---
function updatePlayerInStorage() { localStorage.setItem(`lavri_${auth.currentUser.uid}`, JSON.stringify(player)); updateUI(); }

function checkReward() {
    const now = Date.now();
    const wait = 48 * 60 * 60 * 1000;
    if (now - player.lastReward >= wait) {
        player.points += 2;
        player.lastReward = now;
        updatePlayerInStorage();
    }
    const timeLeft = wait - (now - player.lastReward);
    const h = Math.floor(timeLeft/(3600000)), m = Math.floor((timeLeft%3600000)/60000), s = Math.floor((timeLeft%60000)/1000);
    document.getElementById("reward-timer").textContent = `${h}h ${m}m ${s}s`;
}

function updateUI() {
    document.getElementById("balance").textContent = player.points;
    document.getElementById("weight").textContent = weight.toFixed(1);
    document.getElementById("errors").textContent = errors;
    document.getElementById("time").textContent = time;
    const gs = document.getElementById("game-section");
    if(player.points >= 3) { gs.style.opacity="1"; gs.style.pointerEvents="auto"; document.getElementById("lock-msg").style.display="none"; document.getElementById("game-ui").style.display="block"; }
}

// --- LOGIQUE DU JEU ---
function initGame() {
    const bin = document.getElementById("clothes-bin");
    bin.innerHTML = "";
    clothesData.forEach(c => {
        const btn = document.createElement("button");
        btn.className = "cloth-btn";
        btn.innerHTML = `${c.e}<br><small>${c.w}kg</small>`;
        btn.onclick = () => {
            if(!gameActive) startGame();
            weight += c.w;
            if ((c.c==="white" && (usedColors.has("color")||usedColors.has("black"))) || (usedColors.has("white") && c.c!=="white")) errors++;
            usedColors.add(c.c);
            updateUI();
        };
        bin.appendChild(btn);
    });
}

function startGame() {
    gameActive = true;
    timerInterval = setInterval(() => {
        time--;
        if(time <= 0) endGame("Tan fini! Ou p√®di.");
        updateUI();
    }, 1000);
}

function endGame(msg) {
    clearInterval(timerInterval);
    gameActive = false;
    alert(msg);
    time = 60; weight = 0; errors = 0; usedColors.clear();
    initGame(); updateUI();
}

document.getElementById("finishBtn").onclick = () => {
    if(player.points < 3) return alert("Ou pa gen ase pwen!");
    player.points -= 3;
    let win = 0;
    if(weight >= 20.5 && weight <= 22 && errors < 3) {
        if(errors === 0) win = 10; else if(errors === 1) win = 5; else win = 3;
        player.points += win;
        endGame(`üéâ BRAVO! Ou genyen ${win} pwen!`);
    } else {
        endGame("‚ùå Er√® nan pwa oswa nan triyaj. Ou p√®di 3 pwen.");
    }
    updatePlayerInStorage();
};

// --- AUTHENTIFICATION ---
onAuthStateChanged(auth, (user) => {
    if (user) {
        let saved = localStorage.getItem(`lavri_${user.uid}`);
        if(saved) player = JSON.parse(saved);
        else { player = { points: 100, lastReward: Date.now() }; updatePlayerInStorage(); }
        
        document.getElementById("user-status").innerHTML = `Byenvini <b style="color:#ffd700">${user.displayName}</b>`;
        document.getElementById("login-methods").style.display = "none";
        document.getElementById("player-stats").style.display = "block";
        initGame();
        setInterval(checkReward, 1000);
    } else {
        document.getElementById("login-methods").style.display = "block";
        document.getElementById("player-stats").style.display = "none";
    }
});

document.getElementById('btn-google').onclick = () => signInWithPopup(auth, new GoogleAuthProvider()).then(()=>ding.play());
document.getElementById('btn-logout').onclick = () => signOut(auth).then(()=>dong.play());
</script>

<style>
.social-btn { width: 100%; margin: 5px 0; padding: 10px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; color: white; transition: 0.3s; }
.cloth-btn { background: rgba(255,255,255,0.1); border: 1px solid #ffd700; color: white; padding: 10px; border-radius: 10px; cursor: pointer; width: 60px; transition: 0.2s; }
.cloth-btn:hover { background: #ffd700; color: black; transform: scale(1.1); }
.interactive-card { transition: 0.4s; }
</style>
</body>
</html>

</body>
</html>
























